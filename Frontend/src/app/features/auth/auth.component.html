<!-- =================================== AUTH LAYOUT =================================== -->
<div class="container" #container>
  <!-- ========== RETURN BUTTON ========== -->
  <a routerLink="/home" aria-label="Go back to Home" class="return-btn">
    <i class="fas fa-arrow-left"></i>
  </a>

  <!-- ========== SIGN UP PANEL ========== -->
  <div class="form-container sign-up-container">
    <div class="auth-wrapper d-flex align-items-center justify-content-center">
      <div class="auth-card">
        <h2 class="auth-title">Sign Up</h2>

        <!-- Signup Error Message -->
        <div class="error-message" *ngIf="signupError">
          {{ signupError }}
        </div>

        <form [formGroup]="signupForm" (ngSubmit)="onSubmitSignup()" novalidate>
          <!-- First Name Field -->
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input
              id="firstName"
              type="text"
              formControlName="firstName"
              placeholder="John"
              required
            />
            <div
              class="error"
              *ngIf="signupFirstName.invalid && signupFirstName.touched"
            >
              First name is required.
            </div>
          </div>

          <!-- Last Name Field -->
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input
              id="lastName"
              type="text"
              formControlName="lastName"
              placeholder="Doe"
              required
            />
            <div
              class="error"
              *ngIf="signupLastName.invalid && signupLastName.touched"
            >
              Last name is required.
            </div>
          </div>

          <!-- Email Field -->
          <div class="form-group">
            <label for="signupEmail">Email</label>
            <input
              id="signupEmail"
              type="email"
              formControlName="email"
              placeholder="you@example.com"
              required
            />
            <div
              class="error"
              *ngIf="signupEmail.invalid && signupEmail.touched"
            >
              Please enter a valid email.
            </div>
          </div>

          <!-- Password Field -->
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <input
              id="signupPassword"
              type="password"
              formControlName="password"
              placeholder="••••••••"
              required
            />
            <!-- Password strength indicator -->
            <div class="password-strength" *ngIf="signupPassword.value">
              <div class="strength-meter">
                <div 
                  [ngClass]="{
                    'weak': passwordStrength === 'weak',
                    'medium': passwordStrength === 'medium',
                    'strong': passwordStrength === 'strong'
                  }"
                ></div>
              </div>
              <span class="strength-text">{{passwordStrengthText}}</span>
            </div>
            <div
              class="error"
              *ngIf="signupPassword.invalid && signupPassword.touched"
            >
              Password is required (min 6 chars).
            </div>
          </div>

          <!-- Submit Sign Up -->
          <button
            type="submit"
            [disabled]="signupForm.invalid"
            class="btn-submit"
          >
            Create Account
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- ========== SIGN IN PANEL ========== -->
  <div class="form-container sign-in-container">
    <div class="auth-wrapper d-flex align-items-center justify-content-center">
      <div class="auth-card">
        <h2 class="auth-title">Log In</h2>

        <!-- Login Error Message -->
        <div class="error-message" *ngIf="loginError">
          {{ loginError }}
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmitLogin()" novalidate>
          <!-- Email Field -->
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input
              id="loginEmail"
              type="email"
              formControlName="email"
              placeholder="you@example.com"
              required
            />
            <div class="error" *ngIf="loginEmail.invalid && loginEmail.touched">
              Please enter a valid email.
            </div>
          </div>

          <!-- Password Field -->
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input
              id="loginPassword"
              type="password"
              formControlName="password"
              placeholder="••••••••"
              required
            />
            <div
              class="error"
              *ngIf="loginPassword.invalid && loginPassword.touched"
            >
              Password is required.
            </div>
          </div>

          <!-- Forgot Password Link -->
          <div class="forgot-link text-end">
            <a href="javascript:void(0)" (click)="openForgotPasswordModal()">Forgot password?</a>
          </div>

          <!-- Submit Sign In -->
          <button
            type="submit"
            [disabled]="loginForm.invalid"
            class="btn-submit"
          >
            Sign In
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- ========== OVERLAY PANEL ========== -->
  <div class="overlay-container">
    <div class="overlay">
      <!-- Overlay for Sign In -->
      <div class="overlay-panel overlay-left">
        <h1>Welcome Back!</h1>
        <p>To keep connected with us please log in with your personal info</p>
        <button class="ghost" (click)="showSignin()">Log In</button>
      </div>

      <!-- Overlay for Sign Up -->
      <div class="overlay-panel overlay-right">
        <h1>Hello, Friend!</h1>
        <p>Enter your personal details and start your journey with us</p>
        <button class="ghost" (click)="showSignup()">Sign Up</button>
      </div>
    </div>
  </div>

  <!-- ========== FORGOT PASSWORD MODAL ========== -->
  <div class="modal-overlay" *ngIf="showForgotPasswordModal">
    <div class="modal-container">
      <div class="modal-header">
        <h3>Reset Password</h3>
        <button class="close-btn" (click)="closeForgotPasswordModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <!-- Success Message -->
        <div class="success-message" *ngIf="forgotPasswordSuccess">
          {{ forgotPasswordSuccess }}
        </div>
        
        <!-- Error Message -->
        <div class="error-message" *ngIf="forgotPasswordError">
          {{ forgotPasswordError }}
        </div>
        
        <p>Enter your email address and we'll send you instructions to reset your password.</p>
        
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmitForgotPassword()" novalidate>
          <div class="form-group">
            <label for="forgotPasswordEmail">Email</label>
            <input
              id="forgotPasswordEmail"
              type="email"
              formControlName="email"
              placeholder="you@example.com"
              required
            />
            <div class="error" *ngIf="forgotPasswordEmail.invalid && forgotPasswordEmail.touched">
              Please enter a valid email.
            </div>
          </div>
          
          <button
            type="submit"
            [disabled]="forgotPasswordForm.invalid"
            class="btn-submit"
          >
            Send Reset Link
          </button>
        </form>
      </div>
    </div>
  </div>
</div>